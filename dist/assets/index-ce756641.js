var L=Object.defineProperty;var E=(n,e,a)=>e in n?L(n,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[e]=a;var m=(n,e,a)=>(E(n,typeof e!="symbol"?e+"":e,a),a);import{r as y,a as R,m as w,b as T,C as A,L as O,S,c as _,B as M,t as z,R as I}from"./common-15510848.js";import{l as N,e as D}from"./editor-297099d6.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function a(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(t){if(t.ep)return;t.ep=!0;const s=a(t);fetch(t.href,s)}})();var C={exports:{}},p={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P=y,F=Symbol.for("react.element"),$=Symbol.for("react.fragment"),U=Object.prototype.hasOwnProperty,H=P.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,V={key:!0,ref:!0,__self:!0,__source:!0};function W(n,e,a){var r,t={},s=null,o=null;a!==void 0&&(s=""+a),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)U.call(e,r)&&!V.hasOwnProperty(r)&&(t[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)t[r]===void 0&&(t[r]=e[r]);return{$$typeof:F,type:n,key:s,ref:o,props:t,_owner:H.current}}p.Fragment=$;p.jsx=W;p.jsxs=W;C.exports=p;var i=C.exports,v={},j=R;v.createRoot=j.createRoot,v.hydrateRoot=j.hydrateRoot;function q(){return new Worker("/assets/editor.worker-d485f108.js")}function J(){return new Worker("/assets/json.worker-90203a43.js")}function G(){return new Worker("/assets/css.worker-36c43e0d.js")}function K(){return new Worker("/assets/html.worker-7356b7be.js")}function Q(){return new Worker("/assets/ts.worker-8981a67d.js")}self.MonacoEnvironment={getWorker(n,e){return e==="json"?new J:e==="css"||e==="scss"||e==="less"?new G:e==="html"||e==="handlebars"||e==="razor"?new K:e==="typescript"||e==="javascript"?new Q:new q}};N.typescript.typescriptDefaults.setEagerModelSync(!0);const{defaultAlgorithm:Y,darkAlgorithm:X}=z,{Header:Z,Content:ee}=O,g=()=>window.matchMedia("(prefers-color-scheme: dark)").matches;function te(n){const e=D.create(n.dom,{readOnly:!1,language:"json",theme:g()?"vs-dark":"vs",automaticLayout:!0});return e.updateOptions({fontSize:14,lineNumbersMinChars:4,wordWrap:"on"}),e}const ae=n=>{let e="rgb(0, 0, 0)";return n&&(e="rgb(255, 255, 255)"),i.jsx("a",{href:"https://github.com/vicanso/charts-rs",style:{},children:i.jsx("svg",{height:"32",viewBox:"0 0 16 16",width:"32","aria-hidden":"true",style:{display:"block",marginLeft:"15px",fill:e},children:i.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"})})})},f=[{value:"barBasic",label:"Bar: 常规柱状图"},{value:"lineBasic",label:"Line: 常规曲线图"},{value:"lineSmooth",label:"Line: 常规平滑曲线图"},{value:"lineSmoothFill",label:"Line: 填充平滑曲线图"},{value:"barLineMixin",label:"BarLine: 柱线混合图"},{value:"horizontalBar",label:"HorizontalBar: 水平柱状图"},{value:"pieBasic",label:"Pie: 饼图"},{value:"radarBasic",label:"Radar: 雷达图"},{value:"tableBasic",label:"Table: 表格"}],x=[{value:"grafana",label:"grafana"},{value:"light",label:"light"},{value:"dark",label:"dark"},{value:"ant",label:"ant"}],b=[{value:"svg",label:"svg"},{value:"png",label:"png"}],d={quality:80,width:600,height:400,margin:{left:5,top:5,right:5,bottom:5},font_family:"Roboto",title_font_size:18,title_font_weight:"bold",title_margin:{left:0,top:0,right:0,bottom:0},title_align:"center",title_height:30,sub_title_text:"Sub Title",sub_title_font_size:14,sub_title_margin:{left:0,top:0,right:0,bottom:0},sub_title_align:"center",sub_title_height:20,legend_font_size:14,legend_align:"center",legend_margin:{left:0,top:0,right:0,bottom:0},legend_category:"normal",legend_show:!0,x_axis_height:30,x_axis_font_size:14,x_axis_name_gap:5,x_axis_name_rotate:0,x_boundary_gap:!0},re={barBasic:Object.assign({},d,{type:"bar",title_text:"Bar Chart",legend_align:"left",x_axis_data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],series_list:[{name:"Email",label_show:!0,data:[120,132,101,134,90,230,210]},{name:"Union Ads",label_show:!0,data:[220,182,191,234,290,330,310]}]}),lineBasic:Object.assign({},d,{type:"line",title_text:"Line Chart",legend_align:"right",x_axis_data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],x_boundary_gap:!1,margin:{left:15,top:15,right:15,bottom:15},series_list:[{name:"Email",label_show:!0,data:[120,132,101,134,90,230,210]},{name:"Union Ads",label_show:!0,data:[220,182,191,234,290,330,310]}]}),lineSmooth:Object.assign({},d,{type:"line",title_text:"Line Smooth Chart",legend_align:"right",x_axis_data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],series_smooth:!0,series_list:[{name:"Email",label_show:!0,data:[120,132,101,134,90,230,210]},{name:"Union Ads",label_show:!0,data:[220,182,191,234,290,330,310]}]}),lineSmoothFill:Object.assign({},d,{type:"line",title_text:"Line Smooth Fill Chart",legend_align:"right",x_axis_data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],series_smooth:!0,series_fill:!0,series_list:[{name:"Email",label_show:!0,data:[120,132,101,134,90,230,210]},{name:"Union Ads",label_show:!0,data:[220,182,191,234,290,330,310]}]}),barLineMixin:Object.assign({},d,{type:"bar",title_text:"Bar Line Mixin",sub_title_text:"",legend_margin:{top:25,bottom:3},x_axis_data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],series_smooth:!0,y_axis_configs:[{axis_font_size:14,axis_formatter:"{c} ml"},{axis_stroke_color:"#EE6666",axis_font_color:"#EE6666",axis_formatter:"{c} °C"}],series_list:[{name:"Evaporation",data:[2,4.9,7,23.2,25.6,76.7,135.6]},{name:"Precipitation",data:[2.6,5.9,9,26.4,28.7,70.7,175.6]},{name:"Temperature",category:"line",y_axis_index:1,label_show:!0,data:[2,2.2,3.3,4.5,6.3,10.2,20.3]}]}),horizontalBar:Object.assign({},d,{type:"horizontal_bar",title_text:"World Population",legend_align:"left",x_axis_data:["Brazil","Indonesia","USA","India","China","World"],series_list:[{name:"2011",label_show:!0,data:[18203,23489,29034,104970,131744,630230]},{name:"2012",label_show:!0,data:[19325,23438,31e3,121594,134141,681807]}]}),pieBasic:Object.assign({},d,{type:"pie",title_text:"Nightingale Chart",legend_margin:{top:50},series_list:[{name:"rose 1",data:[40]},{name:"rose 2",data:[38]},{name:"rose 3",data:[32]},{name:"rose 4",data:[30]},{name:"rose 5",data:[28]},{name:"rose 6",data:[26]},{name:"rose 7",data:[22]},{name:"rose 8",data:[18]}]}),radarBasic:Object.assign({},d,{type:"radar",title_text:"Radar Chart",sub_title_text:"",title_margin:{top:20},series_list:[{name:"Allocated Budget",data:[4200,3e3,2e4,35e3,5e4,18e3]},{name:"Actual Spending",data:[5e3,14e3,28e3,26e3,42e3,21e3]}],indicators:[{name:"Sales",max:6500},{name:"Administration",max:16e3},{name:"Information Technology",max:3e4},{name:"Customer Support",max:38e3},{name:"Development",max:52e3},{name:"Marketing",max:25e3}]}),tableBasic:Object.assign({quality:80,width:600,height:400,spans:[.5,.3,.2],text_aligns:["left","center","right"],header_row_padding:{left:10,top:10,right:10,bottom:10},header_row_height:30,header_font_size:16},{type:"table",title_height:45,title_text:"NASDAQ",sub_title_text:"",data:[["Name","Price","Change"],["Datadog Inc","97.32","-7.49%"],["Hashicorp Inc","28.66","-9.25%"],["Gitlab Inc","51.63","+4.32%"]],header_font_weight:"bold",text_aligns:["left","center","right"],cell_styles:[{font_color:"#fff",font_weight:"bold",background_color:"#2d7c2b",indexes:[1,2]}]})};class ie extends y.Component{constructor(a){super(a);m(this,"editorInited");m(this,"editorDom");this.editorDom=y.createRef(),this.editorInited=!1,this.state={theme:x[0].value,format:b[0].value,editor:null,width:0,height:0,svg:"",png:"",processing:!1}}componentDidMount(){if(this.editorInited)return;this.editorInited=!0;const a=te({dom:this.editorDom.current});this.setState({editor:a},()=>{this.changeChartOption(f[0].value)})}getChartOption(){const{editor:a}=this.state;if(a){const r=a.getValue();try{return JSON.parse(r)}catch(t){w.error(t==null?void 0:t.message)}}}changeChartOption(a){const r=Object.assign({},re[a]);this.updateChartOption(r)}updateChartOption(a){a.theme=this.state.theme;const{editor:r}=this.state;r&&r.setValue(JSON.stringify(a,null,2))}refreshChartOption(){this.updateChartOption(this.getChartOption())}async generateChart(){var s;if(this.state.processing)return;const a=this.getChartOption();let r=!0,t="/api/charts/svg";this.state.format=="png"&&(t="/api/charts/png",r=!1);try{this.setState({processing:!0});const o={};r||(o.responseType="arraybuffer");const{data:h}=await T.post(t,a,o);let l="",c="";r?l=h:c=`data:image/png;base64,${btoa(new Uint8Array(h).reduce((k,B)=>k+String.fromCharCode(B),""))}`,this.setState({svg:l,png:c,width:a.width||0,height:a.height||0})}catch(o){let h=o==null?void 0:o.message;const l=o;(s=l==null?void 0:l.response)!=null&&s.data&&(h=l.response.data.message||""),w.error(h||"generate chart fail",10)}finally{this.setState({processing:!1})}}render(){const{svg:a,png:r,width:t,height:s,format:o,processing:h}=this.state;let l="header";g()&&(l+=" dark");const c={position:"absolute",left:"50%",top:"50%",marginTop:`-${s/2}px`,marginLeft:`-${t/2}px`};return i.jsx(A,{theme:{algorithm:g()?X:Y},children:i.jsxs(O,{children:[i.jsx(Z,{className:l,children:i.jsxs("div",{className:"contentWrapper",children:[i.jsx(S,{children:i.jsx("span",{style:{fontWeight:"bold"},children:"CHARTS-RS"})}),i.jsxs(S,{style:{float:"right"},children:[i.jsx(_,{size:"large",style:{width:150},options:b,defaultValue:b[0].value,onChange:u=>{this.setState({format:u})}}),i.jsx(_,{size:"large",style:{width:150},options:x,defaultValue:x[0].value,onChange:u=>{this.setState({theme:u},()=>{this.refreshChartOption()})}}),i.jsx(_,{size:"large",style:{width:250},options:f,defaultValue:f[0].value,onChange:u=>{this.changeChartOption(u)}}),i.jsx(M,{size:"large",type:"primary",style:{width:120},onClick:()=>this.generateChart(),children:h?"生成中...":"运行"}),ae(g())]})]})}),i.jsxs(ee,{children:[i.jsx("div",{className:"editorWrapper",ref:this.editorDom}),i.jsxs("div",{className:"previewWrapper",children:[o==="svg"&&i.jsx("div",{style:c,dangerouslySetInnerHTML:{__html:a}}),o!=="svg"&&i.jsx("img",{style:c,src:r})]})]})]})})}}v.createRoot(document.getElementById("root")).render(i.jsx(I.StrictMode,{children:i.jsx(ie,{})}));
